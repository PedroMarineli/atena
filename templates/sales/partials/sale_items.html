<table class="w-full divide-y divide-slate-200">
    <thead class="bg-slate-50">
        <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Item</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Qtd</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Preço Unit.</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Subtotal</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for item in sale.items.all %}
        <tr class="hover:bg-slate-50 transition-colors">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700">
                {% if item.product %}
                {{ item.product.name }} (Produto)
                {% elif item.service %}
                {{ item.service.name }} (Serviço)
                {% else %}
                Item desconhecido
                {% endif %}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700">{{ item.quantity }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700">R$ {{ item.price }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700">R$ {% widthratio item.price 1 item.quantity
                %}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <button hx-delete="{% url 'sale_remove_item' sale.pk item.pk %}" hx-target="#sale-items-container"
                    class="text-danger hover:text-red-700 font-medium transition-colors">
                    Remover
                </button>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="py-4 text-center text-secondary">Nenhum item adicionado.</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr class="font-bold bg-slate-50">
            <td colspan="3" class="px-6 py-4 text-right text-sm text-slate-900">Total:</td>
            <td class="px-6 py-4 text-sm text-slate-900">R$ {{ sale.total }}</td>
            <td></td>
        </tr>
    </tfoot>
</table>