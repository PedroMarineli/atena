<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Atena{% endblock %}</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#1e293b', // Slate 800
                            light: '#334155',   // Slate 700
                            dark: '#0f172a',    // Slate 900
                        },
                        secondary: {
                            DEFAULT: '#64748b', // Slate 500
                            light: '#94a3b8',   // Slate 400
                        },
                        accent: {
                            DEFAULT: '#2563eb', // Blue 600
                            hover: '#1d4ed8',   // Blue 700
                        },
                        surface: '#f1f5f9',     // Slate 100
                        danger: '#ef4444',      // Red 500
                        success: '#22c55e',     // Green 500
                        warning: '#f59e0b',     // Amber 500
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-surface flex h-screen overflow-hidden" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    <!-- Sidebar -->
    <aside class="w-64 bg-primary text-white flex flex-col shadow-lg">
        <div class="p-6 bg-primary-dark flex flex-col items-center justify-center">
            {% if organization.logo %}
            <img src="{{ organization.logo.url }}" alt="{{ organization.name }}"
                class="h-16 w-auto mb-2 rounded bg-white p-1">
            {% endif %}
            <a href="/" class="text-2xl font-bold tracking-wider">{{ organization.name }}</a>
        </div>

        <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
            <a href="{% url 'customer_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Clientes</a>
            <a href="{% url 'supplier_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Fornecedores</a>
            <a href="{% url 'item_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Produtos</a>
            <a href="{% url 'service_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Serviços</a>
            <a href="{% url 'sale_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Vendas</a>

            {% if user.role == 'ADMIN' or user.is_superuser %}
            <div class="pt-4 pb-2">
                <p class="px-4 text-xs font-semibold text-secondary uppercase tracking-wider">Administração</p>
            </div>
            <a href="{% url 'transaction_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Financeiro</a>
            <a href="{% url 'user_list' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Usuários</a>
            <a href="{% url 'organization_update' %}"
                class="block px-4 py-2 rounded transition-colors hover:bg-primary-light">Configurações</a>
            {% endif %}
        </nav>

        <div class="p-4 bg-primary-dark">
            <div class="flex items-center justify-between">
                <span class="text-sm truncate mr-2">{{ user.get_full_name }}</span>
                <form action="{% url 'logout' %}" method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit"
                        class="text-danger hover:text-red-300 text-sm font-medium transition-colors">Sair</button>
                </form>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto bg-surface p-8">
        <div id="messages" class="mb-4">
            {% if messages %}
            {% for message in messages %}
            <div
                class="p-4 mb-2 rounded-md border {% if message.tags == 'error' %}bg-red-50 text-red-700 border-red-200{% elif message.tags == 'success' %}bg-green-50 text-green-700 border-green-200{% elif message.tags == 'warning' %}bg-yellow-50 text-yellow-700 border-yellow-200{% else %}bg-blue-50 text-blue-700 border-blue-200{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}
        </div>
        {% block content %}{% endblock %}
    </main>
</body>

</html>